{"version":3,"file":"dropdown-panel.min.js","sources":["../src/components/dropdown-component.js","../src/components/dropdown-trigger.js","../src/components/dropdown-panel.js","../src/index.js"],"sourcesContent":["/**\n * main dropdown component\n * manages interactions between <dropdown-trigger> and <dropdown-panel>\n * @class DropdownComponent\n * @extends HTMLElement\n */\nexport class DropdownComponent extends HTMLElement {\n  constructor() {\n    super();\n  }\n\n  connectedCallback() {\n    const _ = this;\n\n    // make component focusable for keyboard navigation\n    _.setAttribute(\"tabindex\", \"-1\");\n\n    // get trigger and panel elements\n    _.trigger = _.querySelector(\"dropdown-trigger\");\n    _.panel = _.querySelector(\"dropdown-panel\");\n\n    // validate existence\n    if (!_.trigger || !_.panel) {\n      console.warn(\n        \"dropdown-component requires <dropdown-trigger> and <dropdown-panel>\",\n      );\n      return;\n    }\n\n    // assign unique id to panel if needed\n    const panelId = _.panel.id || `dropdown-panel-${Date.now()}`;\n    _.panel.id = panelId;\n\n    // assign unique id to trigger if needed (for aria-labelledby)\n    if (!_.trigger.id) {\n      _.trigger.id = `dropdown-trigger-${Date.now()}`;\n    }\n\n    // initialize aria attributes\n    _.trigger.setAttribute(\"aria-controls\", panelId);\n    _.trigger.setAttribute(\"aria-expanded\", \"false\");\n    _.panel.setAttribute(\"aria-hidden\", \"true\");\n    _.panel.setAttribute(\"role\", \"menu\");\n    _.panel.setAttribute(\"aria-labelledby\", _.trigger.id);\n\n    // helper methods\n    _.open = () => {\n      _.panel.setAttribute(\"aria-hidden\", \"false\");\n      _.panel.removeAttribute(\"inert\");\n      _.trigger.setAttribute(\"aria-expanded\", \"true\");\n    };\n\n    _.close = () => {\n      _.panel.setAttribute(\"aria-hidden\", \"true\");\n      _.panel.setAttribute(\"inert\", \"\");\n      _.trigger.setAttribute(\"aria-expanded\", \"false\");\n    };\n\n    _.toggle = () => {\n      if (_.panel.getAttribute(\"aria-hidden\") === \"true\") {\n        _.open();\n      } else {\n        _.close();\n      }\n    };\n\n    // initial state\n    _.close();\n\n    // mouse enter and leave events on main dropdown-component element\n    _.addEventListener(\"mouseenter\", () => _.open());\n    _.addEventListener(\"mouseleave\", () => _.close());\n\n    // open or close with enter\n    _.trigger.addEventListener(\"keydown\", (event) => {\n      if (event.key === \"Enter\" || event.key === \" \") {\n        event.preventDefault();\n        _.toggle();\n      }\n      if (event.key === \"Escape\") {\n        event.preventDefault();\n        _.close();\n        _.trigger.focus();\n      }\n    });\n\n    // close panel when escape\n    _.panel.addEventListener(\"keydown\", (event) => {\n      if (event.key === \"Escape\") {\n        event.preventDefault();\n        _.close();\n        _.trigger.focus();\n      }\n    });\n  }\n}\n\n// define the element\nif (!customElements.get(\"dropdown-component\")) {\n  customElements.define(\"dropdown-component\", DropdownComponent);\n}\n","/**\n * Dropdown trigger component\n * Manages user interactions for opening and closing the dropdown\n * @class DropdownTrigger\n * @extends HTMLElement\n */\nexport class DropdownTrigger extends HTMLElement {\n  constructor() {\n    super();\n  }\n\n  /**\n   * when element is connected to the dom\n   */\n  connectedCallback() {\n    const _ = this;\n    \n    // ensure trigger has an ID for ARIA relationships\n    if (!_.id) {\n      _.id = `dropdown-trigger-${Date.now()}`;\n    }\n\n    // ensure trigger is focusable\n    if (!_.hasAttribute('tabindex')) {\n      _.setAttribute('tabindex', '0');\n    }\n\n    // set role for accessibility\n    if (!_.hasAttribute('role')) {\n      _.setAttribute('role', 'button');\n    }\n\n    // prevent text selection on trigger\n    _.style.userSelect = 'none';\n  }\n}","/**\n * Dropdown panel component\n * Container for dropdown content\n * @class DropdownPanel\n * @extends HTMLElement\n */\nexport class DropdownPanel extends HTMLElement {\n  constructor() {\n    super();\n  }\n\n  /**\n   * when element is connected to the dom\n   */\n  connectedCallback() {\n    const _ = this;\n    \n    // ensure aria-hidden is set initially\n    if (!_.hasAttribute('aria-hidden')) {\n      _.setAttribute('aria-hidden', 'true');\n    }\n    \n    // ensure role is menu by default\n    if (!_.hasAttribute('role')) {\n      _.setAttribute('role', 'menu');\n    }\n  }\n}","/**\n * @file Main entry point for dropdown-panel web component\n * @author Cory Schulz\n * @version 0.1.0\n */\n\n// import styles\nimport \"./dropdown-component.scss\";\n\n// import components\nimport { DropdownComponent } from \"./components/dropdown-component.js\";\nimport { DropdownTrigger } from \"./components/dropdown-trigger.js\";\nimport { DropdownPanel } from \"./components/dropdown-panel.js\";\n\n// export components for external use\nexport { DropdownComponent, DropdownTrigger, DropdownPanel };\n\n// define custom elements if not already defined\nif (!customElements.get(\"dropdown-component\")) {\n  customElements.define(\"dropdown-component\", DropdownComponent);\n}\n\nif (!customElements.get(\"dropdown-trigger\")) {\n  customElements.define(\"dropdown-trigger\", DropdownTrigger);\n}\n\nif (!customElements.get(\"dropdown-panel\")) {\n  customElements.define(\"dropdown-panel\", DropdownPanel);\n}\n"],"names":["DropdownComponent","HTMLElement","constructor","super","connectedCallback","_","this","setAttribute","trigger","querySelector","panel","console","warn","panelId","id","Date","now","open","removeAttribute","close","toggle","getAttribute","addEventListener","event","key","preventDefault","focus","customElements","get","define","DropdownTrigger","hasAttribute","style","userSelect","DropdownPanel"],"mappings":"qPAMO,MAAMA,UAA0BC,YACrC,WAAAC,GACEC,OACD,CAED,iBAAAC,GACE,MAAMC,EAAIC,KAUV,GAPAD,EAAEE,aAAa,WAAY,MAG3BF,EAAEG,QAAUH,EAAEI,cAAc,oBAC5BJ,EAAEK,MAAQL,EAAEI,cAAc,mBAGrBJ,EAAEG,UAAYH,EAAEK,MAInB,YAHAC,QAAQC,KACN,uEAMJ,MAAMC,EAAUR,EAAEK,MAAMI,IAAM,kBAAkBC,KAAKC,QACrDX,EAAEK,MAAMI,GAAKD,EAGRR,EAAEG,QAAQM,KACbT,EAAEG,QAAQM,GAAK,oBAAoBC,KAAKC,SAI1CX,EAAEG,QAAQD,aAAa,gBAAiBM,GACxCR,EAAEG,QAAQD,aAAa,gBAAiB,SACxCF,EAAEK,MAAMH,aAAa,cAAe,QACpCF,EAAEK,MAAMH,aAAa,OAAQ,QAC7BF,EAAEK,MAAMH,aAAa,kBAAmBF,EAAEG,QAAQM,IAGlDT,EAAEY,KAAO,KACPZ,EAAEK,MAAMH,aAAa,cAAe,SACpCF,EAAEK,MAAMQ,gBAAgB,SACxBb,EAAEG,QAAQD,aAAa,gBAAiB,OAAO,EAGjDF,EAAEc,MAAQ,KACRd,EAAEK,MAAMH,aAAa,cAAe,QACpCF,EAAEK,MAAMH,aAAa,QAAS,IAC9BF,EAAEG,QAAQD,aAAa,gBAAiB,QAAQ,EAGlDF,EAAEe,OAAS,KACmC,SAAxCf,EAAEK,MAAMW,aAAa,eACvBhB,EAAEY,OAEFZ,EAAEc,OACH,EAIHd,EAAEc,QAGFd,EAAEiB,iBAAiB,cAAc,IAAMjB,EAAEY,SACzCZ,EAAEiB,iBAAiB,cAAc,IAAMjB,EAAEc,UAGzCd,EAAEG,QAAQc,iBAAiB,WAAYC,IACnB,UAAdA,EAAMC,KAAiC,MAAdD,EAAMC,MACjCD,EAAME,iBACNpB,EAAEe,UAEc,WAAdG,EAAMC,MACRD,EAAME,iBACNpB,EAAEc,QACFd,EAAEG,QAAQkB,QACX,IAIHrB,EAAEK,MAAMY,iBAAiB,WAAYC,IACjB,WAAdA,EAAMC,MACRD,EAAME,iBACNpB,EAAEc,QACFd,EAAEG,QAAQkB,QACX,GAEJ,EAIEC,eAAeC,IAAI,uBACtBD,eAAeE,OAAO,qBAAsB7B,GC7FvC,MAAM8B,UAAwB7B,YACnC,WAAAC,GACEC,OACD,CAKD,iBAAAC,GACE,MAAMC,EAAIC,KAGLD,EAAES,KACLT,EAAES,GAAK,oBAAoBC,KAAKC,SAI7BX,EAAE0B,aAAa,aAClB1B,EAAEE,aAAa,WAAY,KAIxBF,EAAE0B,aAAa,SAClB1B,EAAEE,aAAa,OAAQ,UAIzBF,EAAE2B,MAAMC,WAAa,MACtB,EC5BI,MAAMC,UAAsBjC,YACjC,WAAAC,GACEC,OACD,CAKD,iBAAAC,GACE,MAAMC,EAAIC,KAGLD,EAAE0B,aAAa,gBAClB1B,EAAEE,aAAa,cAAe,QAI3BF,EAAE0B,aAAa,SAClB1B,EAAEE,aAAa,OAAQ,OAE1B,ECREoB,eAAeC,IAAI,uBACtBD,eAAeE,OAAO,qBAAsB7B,GAGzC2B,eAAeC,IAAI,qBACtBD,eAAeE,OAAO,mBAAoBC,GAGvCH,eAAeC,IAAI,mBACtBD,eAAeE,OAAO,iBAAkBK"}