{"version":3,"file":"dropdown-panel.esm.js","sources":["../src/components/dropdown-component.js","../src/components/dropdown-trigger.js","../src/components/dropdown-panel.js","../src/index.js"],"sourcesContent":["/**\n * main dropdown component\n * manages interactions between <dropdown-trigger> and <dropdown-panel>\n * @class DropdownComponent\n * @extends HTMLElement\n */\nexport class DropdownComponent extends HTMLElement {\n  constructor() {\n    super();\n  }\n\n  connectedCallback() {\n    const _ = this;\n\n    // make component focusable for keyboard navigation\n    _.setAttribute(\"tabindex\", \"-1\");\n\n    // get trigger and panel elements\n    _.trigger = _.querySelector(\"dropdown-trigger\");\n    _.panel = _.querySelector(\"dropdown-panel\");\n\n    // validate existence\n    if (!_.trigger || !_.panel) {\n      console.warn(\n        \"dropdown-component requires <dropdown-trigger> and <dropdown-panel>\",\n      );\n      return;\n    }\n\n    // assign unique id to panel if needed\n    const panelId = _.panel.id || `dropdown-panel-${Date.now()}`;\n    _.panel.id = panelId;\n\n    // assign unique id to trigger if needed (for aria-labelledby)\n    if (!_.trigger.id) {\n      _.trigger.id = `dropdown-trigger-${Date.now()}`;\n    }\n\n    // initialize aria attributes\n    _.trigger.setAttribute(\"aria-controls\", panelId);\n    _.trigger.setAttribute(\"aria-expanded\", \"false\");\n    _.panel.setAttribute(\"aria-hidden\", \"true\");\n    _.panel.setAttribute(\"role\", \"menu\");\n    _.panel.setAttribute(\"aria-labelledby\", _.trigger.id);\n\n    // helper methods\n    _.open = () => {\n      _.panel.setAttribute(\"aria-hidden\", \"false\");\n      _.panel.removeAttribute(\"inert\");\n      _.trigger.setAttribute(\"aria-expanded\", \"true\");\n    };\n\n    _.close = () => {\n      _.panel.setAttribute(\"aria-hidden\", \"true\");\n      _.panel.setAttribute(\"inert\", \"\");\n      _.trigger.setAttribute(\"aria-expanded\", \"false\");\n    };\n\n    _.toggle = () => {\n      if (_.panel.getAttribute(\"aria-hidden\") === \"true\") {\n        _.open();\n      } else {\n        _.close();\n      }\n    };\n\n    // initial state\n    _.close();\n\n    // mouse enter and leave events on main dropdown-component element\n    _.addEventListener(\"mouseenter\", () => _.open());\n    _.addEventListener(\"mouseleave\", () => _.close());\n\n    // open or close with enter\n    _.trigger.addEventListener(\"keydown\", (event) => {\n      if (event.key === \"Enter\" || event.key === \" \") {\n        event.preventDefault();\n        _.toggle();\n      }\n      if (event.key === \"Escape\") {\n        event.preventDefault();\n        _.close();\n        _.trigger.focus();\n      }\n    });\n\n    // close panel when escape\n    _.panel.addEventListener(\"keydown\", (event) => {\n      if (event.key === \"Escape\") {\n        event.preventDefault();\n        _.close();\n        _.trigger.focus();\n      }\n    });\n  }\n}\n\n// define the element\nif (!customElements.get(\"dropdown-component\")) {\n  customElements.define(\"dropdown-component\", DropdownComponent);\n}\n","/**\n * Dropdown trigger component\n * Manages user interactions for opening and closing the dropdown\n * @class DropdownTrigger\n * @extends HTMLElement\n */\nexport class DropdownTrigger extends HTMLElement {\n  constructor() {\n    super();\n  }\n\n  /**\n   * when element is connected to the dom\n   */\n  connectedCallback() {\n    const _ = this;\n    \n    // ensure trigger has an ID for ARIA relationships\n    if (!_.id) {\n      _.id = `dropdown-trigger-${Date.now()}`;\n    }\n\n    // ensure trigger is focusable\n    if (!_.hasAttribute('tabindex')) {\n      _.setAttribute('tabindex', '0');\n    }\n\n    // set role for accessibility\n    if (!_.hasAttribute('role')) {\n      _.setAttribute('role', 'button');\n    }\n\n    // prevent text selection on trigger\n    _.style.userSelect = 'none';\n  }\n}","/**\n * Dropdown panel component\n * Container for dropdown content\n * @class DropdownPanel\n * @extends HTMLElement\n */\nexport class DropdownPanel extends HTMLElement {\n  constructor() {\n    super();\n  }\n\n  /**\n   * when element is connected to the dom\n   */\n  connectedCallback() {\n    const _ = this;\n    \n    // ensure aria-hidden is set initially\n    if (!_.hasAttribute('aria-hidden')) {\n      _.setAttribute('aria-hidden', 'true');\n    }\n    \n    // ensure role is menu by default\n    if (!_.hasAttribute('role')) {\n      _.setAttribute('role', 'menu');\n    }\n  }\n}","/**\n * @file Main entry point for dropdown-panel web component\n * @author Cory Schulz\n * @version 0.1.0\n */\n\n// import styles\nimport \"./dropdown-component.scss\";\n\n// import components\nimport { DropdownComponent } from \"./components/dropdown-component.js\";\nimport { DropdownTrigger } from \"./components/dropdown-trigger.js\";\nimport { DropdownPanel } from \"./components/dropdown-panel.js\";\n\n// export components for external use\nexport { DropdownComponent, DropdownTrigger, DropdownPanel };\n\n// define custom elements if not already defined\nif (!customElements.get(\"dropdown-component\")) {\n  customElements.define(\"dropdown-component\", DropdownComponent);\n}\n\nif (!customElements.get(\"dropdown-trigger\")) {\n  customElements.define(\"dropdown-trigger\", DropdownTrigger);\n}\n\nif (!customElements.get(\"dropdown-panel\")) {\n  customElements.define(\"dropdown-panel\", DropdownPanel);\n}\n"],"names":[],"mappings":"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"}